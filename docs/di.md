# DI 依赖注入

## 注入方式

- 构造器注入
- 属性注入

##

在 NestJS 中，@Inject() 装饰器用于指定注入的 provider 的 token。Token 可以是字符串类型或 class 类型，它们之间的区别主要体现在依赖解析和代码组织上：

- Class 类型 Token：

当使用 class 类型作为 token 时，NestJS 会直接使用该类的类型来解析依赖。这种方式更加类型安全，因为 TypeScript 能够在编译时检查类型的正确性。

使用 class 类型 token 时，通常不需要显式使用 @Inject() 装饰器，除非你需要解决某些特定的依赖解析问题。

Class 类型的 token 使得代码更加清晰和易于重构，因为依赖关系直接与类的定义相关联。

- 字符串类型 Token：

字符串类型的 token 提供了更高的灵活性。它允许你为 provider 定义一个自定义的标识符，这在处理没有明确类类型的值（如第三方库的服务）或者当你想要在不同实现之间切换时非常有用。

使用字符串 token 时，必须显式使用 @Inject() 装饰器来指定注入的 token。
字符串 token 可能会降低代码的类型安全性，因为 TypeScript 无法在编译时验证字符串的正确性。此外，使用字符串作为标识符可能会增加拼写错误的风险，并且在重构时不如类类型那样容易更新。

总的来说，class 类型的 token 在大多数情况下是首选，因为它提供了更好的类型安全性和代码清晰度。字符串类型的 token 在需要额外的灵活性或处理非类类型的依赖时非常有用。选择哪种类型的 token 取决于具体的应用场景和开发者的偏好。